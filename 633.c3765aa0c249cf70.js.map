{"version":3,"file":"633.c3765aa0c249cf70.js","mappings":"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","names":["PerfilPermissaoService","constructor","http","this","getAll","get","env","apiPath","getById","perfilPermissao","perfilId","permissaoId","insert","post","update","put","delete","i0","factory","PerfilPermissaoListComponent","perfilService","permissaoService","perfilPermissaoService","filtro","pagina","direcaoOrdenacao","tamanho","ordenarPor","ngOnInit","carregaInformacoesPerfilPermissao","subscribe","perfils","content","error","toastr","timeOut","progressBar","closeButton","permissoes","carregaDadosPerfilPermissao","atualizaPerfilPermissao","perfil","permissao","perfilPermissaoRequest","find","pp","id","status","index","findIndex","mostrarPermissao","permissaoAtivada","length","perfilPermissoes","selectors","PerfilPermissaoVinculacaoComponent","temPermissao","adicionarPermissao","descricao","nome","push","removerPermissao","splice","routes","path","component","ConfiguracoesComponent","_changeDetectorRef","_fuseMediaWatcherService","Subject","panels","icon","title","description","onMediaChange$","pipe","takeUntil","_unsubscribeAll","matchingAliases","includes","drawerMode","drawerOpened","markForCheck","ngOnDestroy","next","complete","goToPanel","panel","selectedPanel","drawer","close","getPanelInfo","trackByFn","item","PerfilPermissaoModule","CommonModule","RouterModule","SharedModule"],"sourceRoot":"webpack:///","sources":["./src/app/modules/perfil-permissao/api/perfil-permissao.service.ts","./src/app/modules/perfil-permissao/containers/perfil-permissao-list/perfil-permissao-list.component.html","./src/app/modules/perfil-permissao/containers/perfil-permissao-list/perfil-permissao-list.component.ts","./src/app/modules/perfil-permissao/containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component.html","./src/app/modules/perfil-permissao/containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component.ts","./src/app/modules/perfil-permissao/containers/configuracoes/configuracoes.component.html","./src/app/modules/perfil-permissao/perfil-permissao.module.ts","./src/app/modules/perfil-permissao/containers/configuracoes/configuracoes.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { PerfilPermissao } from '../model/perfil-permissao.model';\r\nimport { environment as env } from 'environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class PerfilPermissaoService {\r\n  readonly apiPath = '/perfilpermissao';\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getAll(): Observable<PerfilPermissao[]> {\r\n    return this.http.get<PerfilPermissao[]>(`${env.api}${this.apiPath}`);\r\n  }\r\n\r\n  getById(perfilPermissao: PerfilPermissao): Observable<PerfilPermissao> {\r\n    return this.http.get<PerfilPermissao>(\r\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`\r\n    );\r\n  }\r\n\r\n  insert(perfilPermissao: PerfilPermissao): Observable<null> {\r\n    return this.http.post<null>(`${env.api}${this.apiPath}`, perfilPermissao);\r\n  }\r\n\r\n  update(perfilPermissao: PerfilPermissao): Observable<null> {\r\n    return this.http.put<null>(\r\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`,\r\n      perfilPermissao\r\n    );\r\n  }\r\n\r\n  delete(perfilPermissao: PerfilPermissao): Observable<null> {\r\n    return this.http.delete<null>(\r\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`\r\n    );\r\n  }\r\n}\r\n","<div class=\"w-full max-w-3xl\">\r\n  <ng-container *ngFor=\"let perfil of perfils\">\r\n    <mat-accordion class=\"max-w-4xl mt-8\">\r\n      <mat-expansion-panel class=\"bg-accent-200 dark:bg-accent-700 mt-2\">\r\n        <mat-expansion-panel-header [collapsedHeight]=\"'56px'\">\r\n          <mat-panel-title class=\"font-medium leading-tight\">\r\n            {{ perfil.nome }}\r\n          </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <div class=\"grid grid-cols-1 gap-2 w-full mt-3\">\r\n          <!-- Permissão pai -->\r\n          <ng-container *ngFor=\"let permissao of permissoes\">\r\n            <ng-container *ngIf=\"\r\n                !permissao.permissaoPai && mostrarPermissao(perfil, permissao)\r\n              \">\r\n              <div class=\"flex items-center justify-between mt-3 border-dashed border-primary hover:border-b-2\">\r\n                <div class=\"flex-auto cursor-pointer\" (click)=\"communication.toggle()\">\r\n                  <div class=\"leading-6 font-medium\">\r\n                    {{ permissao.descricao }}\r\n                  </div>\r\n                </div>\r\n                <mat-slide-toggle (click)=\"atualizaPerfilPermissao(perfil, permissao)\"\r\n                  [checked]=\"permissaoAtivada(perfil, permissao)\" class=\"ml-2\" [color]=\"'primary'\" #communication>\r\n                </mat-slide-toggle>\r\n              </div>\r\n\r\n              <ng-container *ngFor=\"let permissao_filho of permissoes\">\r\n                <!-- Permissão Filha -->\r\n                <div class=\"flex items-center justify-between ml-6 border-dashed border-primary hover:border-b-2\" *ngIf=\"\r\n                    permissao_filho.permissaoPai &&\r\n                    permissao_filho.permissaoPai.descricao ===\r\n                      permissao.descricao\r\n                  \">\r\n                  <div class=\"flex-auto cursor-pointer\" (click)=\"securityToggle.toggle()\">\r\n                    <div class=\"leading-6 font-medium\">\r\n                      {{ permissao_filho.descricao }}\r\n                    </div>\r\n                  </div>\r\n                  <mat-slide-toggle (click)=\"atualizaPerfilPermissao(perfil, permissao_filho)\"\r\n                    [checked]=\"permissaoAtivada(perfil, permissao_filho)\" class=\"ml-2\" [color]=\"'primary'\"\r\n                    #securityToggle>\r\n                  </mat-slide-toggle>\r\n                </div>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n  </ng-container>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PerfilService } from 'app/modules/perfil/api/perfil.service';\r\nimport { Perfil } from 'app/modules/perfil/models/perfil.model';\r\nimport { PermissaoService } from 'app/modules/permissao/api/permissao.service';\r\nimport { Permissao } from 'app/modules/permissao/permissao.mode';\r\nimport { IFilter } from 'app/shared/models/interface.model';\r\nimport { PerfilPermissaoService } from '../../api/perfil-permissao.service';\r\nimport { PerfilPermissao } from '../../model/perfil-permissao.model';\r\nimport toastr from 'toastr';\r\n\r\n@Component({\r\n  selector: 'app-perfil-permissao-list',\r\n  templateUrl: './perfil-permissao-list.component.html',\r\n  styleUrls: ['./perfil-permissao-list.component.scss'],\r\n})\r\nexport class PerfilPermissaoListComponent implements OnInit {\r\n  constructor(\r\n    private perfilService: PerfilService,\r\n    private permissaoService: PermissaoService,\r\n    private perfilPermissaoService: PerfilPermissaoService\r\n  ) {}\r\n\r\n  perfils: Perfil[] = [];\r\n  permissoes: Permissao[] = [];\r\n  perfilPermissao: PerfilPermissao[] = [];\r\n\r\n  filtro: IFilter = {\r\n    filtro: '',\r\n    pagina: 0,\r\n    direcaoOrdenacao: 'ASC',\r\n    tamanho: 100,\r\n    ordenarPor: 'id',\r\n  };\r\n\r\n  ngOnInit(): void {\r\n    this.carregaInformacoesPerfilPermissao();\r\n  }\r\n\r\n  carregaInformacoesPerfilPermissao(): void {\r\n    this.perfilService.getAll(this.filtro).subscribe(\r\n      (perfils) => {\r\n        this.perfils = perfils.content;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar os perfils',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n\r\n    this.permissaoService.getAll(this.filtro).subscribe(\r\n      (permissoes) => {\r\n        this.permissoes = permissoes.content;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar os permissões',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n\r\n    this.carregaDadosPerfilPermissao();\r\n  }\r\n\r\n  atualizaPerfilPermissao(perfil: Perfil, permissao: Permissao): void {\r\n    let perfilPermissaoRequest: PerfilPermissao = {\r\n      ...this.perfilPermissao.find(\r\n        (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n      ),\r\n    };\r\n    perfilPermissaoRequest.status = !perfilPermissaoRequest.status;\r\n    this.perfilPermissaoService.update(perfilPermissaoRequest).subscribe(\r\n      () => {\r\n        const index = this.perfilPermissao.findIndex(\r\n          (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n        );\r\n        this.perfilPermissao[index].status = perfilPermissaoRequest.status;\r\n        toastr.success('Permissao atualizada com sucesso!', '', {\r\n          timeOut: 10000,\r\n          progressBar: true,\r\n          closeButton: true,\r\n        });\r\n      },\r\n      (error) => {\r\n        toastr.error(\r\n          'Não foi possível atualizar perfil e permissao selecionado',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        );\r\n      }\r\n    );\r\n  }\r\n\r\n  mostrarPermissao(perfil: Perfil, permissao: Permissao): boolean {\r\n    return !!this.perfilPermissao.find(\r\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n    );\r\n  }\r\n\r\n  permissaoAtivada(perfil: Perfil, permissao: Permissao): boolean {\r\n    if (this.perfilPermissao.length < 1) return false;\r\n    const perfilPermissao = this.perfilPermissao.find(\r\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n    );\r\n\r\n    if (!perfilPermissao) return false;\r\n\r\n    return perfilPermissao.status;\r\n  }\r\n\r\n  private carregaDadosPerfilPermissao(): void {\r\n    this.perfilPermissaoService.getAll().subscribe(\r\n      (perfilPermissoes) => {\r\n        this.perfilPermissao = perfilPermissoes;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar perfils e permissões',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n  }\r\n}\r\n","<div class=\"w-full max-w-3xl\">\r\n  <ng-container *ngFor=\"let perfil of perfils\">\r\n    <mat-accordion class=\"max-w-4xl mt-8 bg-accent-400\">\r\n      <mat-expansion-panel class=\"bg-accent-200 dark:bg-accent-700 mt-2\">\r\n        <mat-expansion-panel-header [collapsedHeight]=\"'56px'\">\r\n          <mat-panel-title class=\"font-medium leading-tight\">\r\n            {{ perfil.nome }}\r\n          </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <div class=\"grid grid-cols-1 gap-2 w-full mt-3\">\r\n          <!-- Permissão pai -->\r\n          <ng-container *ngFor=\"let permissao of permissoes\">\r\n            <ng-container *ngIf=\"!permissao.permissaoPai\">\r\n              <div class=\"flex items-center justify-between mt-3 border-dashed border-primary hover:border-b-2\">\r\n                <div class=\"flex-auto\">\r\n                  <div class=\"leading-6 font-medium\">\r\n                    {{ permissao.descricao }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"order-1 sm:order-2 sm:ml-3 cursor-pointer\">\r\n                  <button *ngIf=\"!temPermissao(perfil, permissao)\" mat-icon-button\r\n                    class=\"hover:bg-green-100 hover:dark:bg-green\" (click)=\"adicionarPermissao(perfil, permissao)\">\r\n                    <mat-icon class=\"text-hint text-green-700 dark:text-on-green\"\r\n                      [svgIcon]=\"'heroicons_outline:plus-circle'\"></mat-icon>\r\n                  </button>\r\n                  <button *ngIf=\"temPermissao(perfil, permissao)\" mat-icon-button\r\n                    class=\"hover:bg-red-100 hover:dark:bg-red\" (click)=\"removerPermissao(perfil, permissao)\">\r\n                    <mat-icon class=\"text-hint text-red-700 dark:text-on-red\" [svgIcon]=\"'heroicons_outline:trash'\">\r\n                    </mat-icon>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <ng-container *ngFor=\"let permissao_filho of permissoes\">\r\n                <!-- Permissão Filha -->\r\n                <div class=\"flex items-center justify-between ml-6 border-dashed border-primary hover:border-b-2\" *ngIf=\"\r\n                    permissao_filho.permissaoPai &&\r\n                    permissao_filho.permissaoPai.descricao ===\r\n                      permissao.descricao\r\n                  \">\r\n                  <div class=\"flex-auto\">\r\n                    <div class=\"leading-6 font-medium\">\r\n                      {{ permissao_filho.descricao }}\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"order-1 sm:order-2 sm:ml-3 cursor-pointer\">\r\n                    <button *ngIf=\"!temPermissao(perfil, permissao_filho)\" mat-icon-button\r\n                      class=\"hover:bg-green-100 hover:dark:bg-green\"\r\n                      (click)=\"adicionarPermissao(perfil, permissao_filho)\">\r\n                      <mat-icon class=\"text-hint text-green-700 dark:text-on-green\"\r\n                        [svgIcon]=\"'heroicons_outline:plus-circle'\"></mat-icon>\r\n                    </button>\r\n                    <button *ngIf=\"temPermissao(perfil, permissao_filho)\" mat-icon-button\r\n                      class=\"hover:bg-red-100 hover:dark:bg-red\" (click)=\"removerPermissao(perfil, permissao_filho)\">\r\n                      <mat-icon class=\"text-hint text-red-700 dark:text-on-red\" [svgIcon]=\"'heroicons_outline:trash'\">\r\n                      </mat-icon>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n  </ng-container>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PerfilService } from 'app/modules/perfil/api/perfil.service';\r\nimport { Perfil } from 'app/modules/perfil/models/perfil.model';\r\nimport { PermissaoService } from 'app/modules/permissao/api/permissao.service';\r\nimport { Permissao } from 'app/modules/permissao/permissao.mode';\r\nimport { IFilter } from 'app/shared/models/interface.model';\r\nimport { PerfilPermissaoService } from '../../api/perfil-permissao.service';\r\nimport { PerfilPermissao } from '../../model/perfil-permissao.model';\r\nimport toastr from 'toastr';\r\n\r\n@Component({\r\n  selector: 'app-perfil-permissao-vinculacao',\r\n  templateUrl: './perfil-permissao-vinculacao.component.html',\r\n  styleUrls: ['./perfil-permissao-vinculacao.component.scss'],\r\n})\r\nexport class PerfilPermissaoVinculacaoComponent implements OnInit {\r\n  perfils: Perfil[] = [];\r\n  permissoes: Permissao[] = [];\r\n  perfilPermissao: PerfilPermissao[] = [];\r\n\r\n  filtro: IFilter = {\r\n    filtro: '',\r\n    pagina: 0,\r\n    direcaoOrdenacao: 'ASC',\r\n    tamanho: 100,\r\n    ordenarPor: 'id',\r\n  };\r\n\r\n  constructor(\r\n    private perfilService: PerfilService,\r\n    private permissaoService: PermissaoService,\r\n    private perfilPermissaoService: PerfilPermissaoService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.carregaInformacoesPerfilPermissao();\r\n  }\r\n\r\n  carregaInformacoesPerfilPermissao(): void {\r\n    this.perfilService.getAll(this.filtro).subscribe(\r\n      (perfils) => {\r\n        this.perfils = perfils.content;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar os perfils',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n\r\n    this.permissaoService.getAll(this.filtro).subscribe(\r\n      (permissoes) => {\r\n        this.permissoes = permissoes.content;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar os permissões',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n\r\n    this.perfilPermissaoService.getAll().subscribe(\r\n      (perfilPermissoes) => {\r\n        this.perfilPermissao = perfilPermissoes;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar perfils e permissões',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n  }\r\n\r\n  temPermissao(perfil: Perfil, permissao: Permissao): boolean {\r\n    return !!this.perfilPermissao.find(\r\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n    );\r\n  }\r\n\r\n  adicionarPermissao(perfil: Perfil, permissao: Permissao): void {\r\n    this.perfilPermissaoService\r\n      .insert({\r\n        perfilId: perfil.id,\r\n        permissaoId: permissao.id,\r\n        status: true,\r\n      })\r\n      .subscribe(\r\n        () => {\r\n          toastr.success(\r\n            `Permissão ${permissao.descricao} vínculada ao perfil ${perfil.nome} com sucesso!`,\r\n            '',\r\n            {\r\n              timeOut: 10000,\r\n              progressBar: true,\r\n              closeButton: true,\r\n            }\r\n          );\r\n          this.perfilPermissao.push({\r\n            perfilId: perfil.id,\r\n            permissaoId: permissao.id,\r\n            status: true,\r\n          });\r\n        },\r\n        (error) =>\r\n          toastr.error('Erro ao víncular nova permissão', error.error.error, {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          })\r\n      );\r\n  }\r\n\r\n  removerPermissao(perfil: Perfil, permissao: Permissao): void {\r\n    this.perfilPermissaoService\r\n      .delete({\r\n        perfilId: perfil.id,\r\n        permissaoId: permissao.id,\r\n        status: true,\r\n      })\r\n      .subscribe(\r\n        () => {\r\n          toastr.success(\r\n            `Permissão ${permissao.descricao} removida do perfil ${perfil.nome} com sucesso!`,\r\n            '',\r\n            {\r\n              timeOut: 10000,\r\n              progressBar: true,\r\n              closeButton: true,\r\n            }\r\n          );\r\n          const index = this.perfilPermissao.findIndex(\r\n            (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n          );\r\n          this.perfilPermissao.splice(index, 1);\r\n        },\r\n        (error) =>\r\n          toastr.error('Não foi possível remover vínculo', error.error.error, {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          })\r\n      );\r\n  }\r\n}\r\n","<div class=\"flex flex-col w-full min-w-0 sm:absolute sm:inset-0 sm:overflow-hidden\">\r\n  <mat-drawer-container class=\"flex-auto sm:h-full dark:bg-accent-800\">\r\n    <!-- Drawer -->\r\n    <mat-drawer class=\"sm:w-96 dark:bg-gray-900\" [autoFocus]=\"false\" [mode]=\"drawerMode\" [opened]=\"drawerOpened\"\r\n      #drawer>\r\n      <!-- Header -->\r\n      <div class=\"flex items-center justify-between m-8 mr-6 sm:my-10\">\r\n        <!-- Title -->\r\n        <div class=\"text-4xl font-extrabold tracking-tight leading-none\">\r\n          Configurações\r\n        </div>\r\n        <!-- Close button -->\r\n        <div class=\"lg:hidden\">\r\n          <button mat-icon-button (click)=\"drawer.close()\">\r\n            <mat-icon [svgIcon]=\"'heroicons_outline:x'\"></mat-icon>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <!-- Panel links -->\r\n      <div class=\"flex flex-col divide-y border-t border-b\">\r\n        <ng-container *ngFor=\"let panel of panels; trackBy: trackByFn\">\r\n          <div class=\"flex px-8 py-5 cursor-pointer\" [ngClass]=\"{\r\n              'hover:bg-gray-100 dark:hover:bg-hover':\r\n                !selectedPanel || selectedPanel !== panel.id,\r\n              'bg-primary-50 dark:bg-hover':\r\n                selectedPanel && selectedPanel === panel.id\r\n            }\" (click)=\"goToPanel(panel.id)\">\r\n            <mat-icon [ngClass]=\"{\r\n                'text-hint': !selectedPanel || selectedPanel !== panel.id,\r\n                'text-primary dark:text-primary-500':\r\n                  selectedPanel && selectedPanel === panel.id\r\n              }\" [svgIcon]=\"panel.icon\"></mat-icon>\r\n            <div class=\"ml-3\">\r\n              <div class=\"font-medium leading-6\" [ngClass]=\"{\r\n                  'text-primary dark:text-primary-500':\r\n                    selectedPanel && selectedPanel === panel.id\r\n                }\">\r\n                {{panel.title}}\r\n              </div>\r\n              <div class=\"mt-0.5 text-secondary\">\r\n                {{panel.description}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n    </mat-drawer>\r\n\r\n    <!-- Drawer content -->\r\n    <mat-drawer-content class=\"flex flex-col\">\r\n      <!-- Main -->\r\n      <div class=\"flex-auto px-6 pt-9 pb-12 md:p-8 md:pb-12 lg:p-12\">\r\n        <!-- Panel header -->\r\n        <div class=\"flex items-center\">\r\n          <!-- Drawer toggle -->\r\n          <button class=\"lg:hidden -ml-2\" mat-icon-button (click)=\"drawer.toggle()\">\r\n            <mat-icon [svgIcon]=\"'heroicons_outline:menu'\"></mat-icon>\r\n          </button>\r\n\r\n          <!-- Panel title -->\r\n          <div class=\"ml-2 lg:ml-0 text-3xl font-bold tracking-tight leading-none\">\r\n            {{getPanelInfo(selectedPanel).title}}\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Load settings panel -->\r\n        <div class=\"mt-8\">\r\n          <ng-container [ngSwitch]=\"selectedPanel\">\r\n            <!-- Account -->\r\n            <ng-container *ngSwitchCase=\"'perfils'\">\r\n              <app-perfil-permissao-list></app-perfil-permissao-list>\r\n            </ng-container>\r\n            <!-- Security -->\r\n            <ng-container *ngSwitchCase=\"'vinculacao'\">\r\n              <app-perfil-permissao-vinculacao></app-perfil-permissao-vinculacao>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </mat-drawer-content>\r\n  </mat-drawer-container>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PerfilPermissaoListComponent } from './containers/perfil-permissao-list/perfil-permissao-list.component';\r\nimport { SharedModule } from 'app/shared/shared.module';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { ConfiguracoesComponent } from './containers/configuracoes/configuracoes.component';\r\nimport { PerfilPermissaoVinculacaoComponent } from './containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component';\r\n\r\nconst routes: Route[] = [{ path: '', component: ConfiguracoesComponent }];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PerfilPermissaoListComponent,\r\n    ConfiguracoesComponent,\r\n    PerfilPermissaoVinculacaoComponent,\r\n  ],\r\n  imports: [CommonModule, RouterModule.forChild(routes), SharedModule],\r\n})\r\nexport class PerfilPermissaoModule {}\r\n","import {\r\n  ChangeDetectorRef,\r\n  Component,\r\n  OnDestroy,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { MatDrawer } from '@angular/material/sidenav';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { FuseMediaWatcherService } from '@fuse/services/media-watcher';\r\n\r\n@Component({\r\n  selector: 'app-configuracoes',\r\n  templateUrl: './configuracoes.component.html',\r\n  styleUrls: ['./configuracoes.component.scss'],\r\n})\r\nexport class ConfiguracoesComponent implements OnInit, OnDestroy {\r\n  @ViewChild('drawer') drawer: MatDrawer;\r\n  drawerMode: 'over' | 'side' = 'side';\r\n  drawerOpened: boolean = true;\r\n  panels: any[] = [];\r\n  selectedPanel: string = 'perfils';\r\n  private _unsubscribeAll: Subject<any> = new Subject<any>();\r\n\r\n  constructor(\r\n    private _changeDetectorRef: ChangeDetectorRef,\r\n    private _fuseMediaWatcherService: FuseMediaWatcherService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.panels = [\r\n      {\r\n        id: 'perfils',\r\n        icon: 'heroicons_outline:adjustments',\r\n        title: 'Lista de perfils com permissões',\r\n        description: 'Detalhes de cada perfil com suas permissões',\r\n      },\r\n      {\r\n        id: 'vinculacao',\r\n        icon: 'heroicons_outline:user-group',\r\n        title: 'Vínculação',\r\n        description: 'Víncular permissões a perfils!',\r\n      },\r\n    ];\r\n\r\n    this._fuseMediaWatcherService.onMediaChange$\r\n      .pipe(takeUntil(this._unsubscribeAll))\r\n      .subscribe(({ matchingAliases }) => {\r\n        if (matchingAliases.includes('lg')) {\r\n          this.drawerMode = 'side';\r\n          this.drawerOpened = true;\r\n        } else {\r\n          this.drawerMode = 'over';\r\n          this.drawerOpened = false;\r\n        }\r\n\r\n        this._changeDetectorRef.markForCheck();\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._unsubscribeAll.next(null);\r\n    this._unsubscribeAll.complete();\r\n  }\r\n\r\n  goToPanel(panel: string): void {\r\n    this.selectedPanel = panel;\r\n\r\n    if (this.drawerMode === 'over') {\r\n      this.drawer.close();\r\n    }\r\n  }\r\n\r\n  getPanelInfo(id: string): any {\r\n    return this.panels.find((panel) => panel.id === id);\r\n  }\r\n\r\n  trackByFn(index: number, item: any): any {\r\n    return item.id || index;\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}