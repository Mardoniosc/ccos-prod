"use strict";(self.webpackChunkstandart=self.webpackChunkstandart||[]).push([[61],{4061:(C,x,a)=>{a.r(x),a.d(x,{MY_DATE_FORMATS:()=>D,OrdemServicoModule:()=>Ae});var i=a(4666),h=a(9706),g=a(4466),Z=a(971),s=a(2508),e=a(2560),S=a(640),T=a(4522),v=a(7822),_=a(5074),d=a(1267),c=a(2298),l=a(2922),u=a(5117);let p=(()=>{class o{constructor(t,r){this.dialogRef=t,this._formBuilder=r}ngOnInit(){this.criarFormularioRelatorio()}fecharDialog(t){t?this.submitForm():this.dialogRef.close()}submitForm(){this.form.invalid||(console.log(this.form.value),alert(`Ainda n\xe3o gerando \n\n ${JSON.stringify(this.form.value)}`))}criarFormularioRelatorio(){this.form=this._formBuilder.group({nome:[null,[s.kI.required,s.kI.minLength(2)]],inicio:[new Date,[s.kI.required]],fim:[new Date,[s.kI.required]],tipo:["TODOS",[s.kI.required]],tipoRelatorio:["DETALHADO",[s.kI.required]]})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S.so),e.Y36(s.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-relatorio-form"]],decls:49,vars:8,consts:[[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto"],[3,"formGroup"],[1,"grid","sm:grid-cols-4","gap-6","w-full"],[1,"sm:col-span-4"],[1,"p-1","w-full"],["id","nome","matInput","","placeholder","Informar descri\xe7\xe3o do objeto",3,"formControlName"],[3,"form-control"],[3,"rangePicker"],["matStartDate","","formControlName","inicio","placeholder","Data In\xedcio"],["matEndDate","","formControlName","fim","placeholder","Data Fim"],["matIconSuffix","",3,"for"],["periodo_data",""],[1,"flex","flex-col","sm:flex-row","sm:my-2"],[1,"w-1/3","px-1","flex","flex-col","my-3"],[1,"font-medium","mb-2"],["aria-label","Selecione uma op\xe7\xe3o","formControlName","tipo",1,"flex"],["color","primary","value","INSTALACAO",1,"px-1"],["color","primary","value","ASSISTENCIA",1,"px-1"],["color","primary","value","TODOS",1,"px-1"],["aria-label","Selecione uma op\xe7\xe3o","formControlName","tipoRelatorio",1,"flex"],["color","primary","value","DETALHADO",1,"px-1"],["color","primary","value","RESUMIDO",1,"px-1"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","mt-4","sm:mt-6","border-t"],[1,"-ml-2"],[1,"flex","items-center","mt-4","sm:mt-0"],["id","btn-salvar-objeto","type","button","mat-button","",1,"ml-2","mt-3","fuse-mat-button-rounded","mat-flat-button","mat-button-base","mat-primary",3,"disabled","click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Relat\xf3rio Ordem de Servi\xe7o"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.fecharDialog(!1)}),e._UZ(5,"mat-icon",4),e.qZA()(),e.TgZ(6,"div",5)(7,"form",6)(8,"div",7)(9,"div",8)(10,"mat-form-field",9)(11,"mat-label"),e._uU(12,"Nome Relat\xf3rio"),e.qZA(),e._UZ(13,"input",10),e.qZA(),e._UZ(14,"app-form-field-error",11),e.TgZ(15,"mat-form-field",9)(16,"mat-label"),e._uU(17,"Per\xedodo"),e.qZA(),e.TgZ(18,"mat-date-range-input",12),e._UZ(19,"input",13)(20,"input",14),e.qZA(),e._UZ(21,"mat-datepicker-toggle",15)(22,"mat-date-range-picker",null,16),e.qZA(),e.TgZ(24,"div",17)(25,"div",18)(26,"span",19),e._uU(27,"Tipo"),e.qZA(),e.TgZ(28,"mat-radio-group",20)(29,"mat-radio-button",21),e._uU(30,"INSTALA\xc7\xc3O"),e.qZA(),e.TgZ(31,"mat-radio-button",22),e._uU(32,"ASSISTENCIA"),e.qZA(),e.TgZ(33,"mat-radio-button",23),e._uU(34,"TODOS"),e.qZA()()()(),e.TgZ(35,"div",17)(36,"div",18)(37,"span",19),e._uU(38,"Tipo de Relatorio"),e.qZA(),e.TgZ(39,"mat-radio-group",24)(40,"mat-radio-button",25),e._uU(41,"DETALHADO"),e.qZA(),e.TgZ(42,"mat-radio-button",26),e._uU(43,"RESUMIDO"),e.qZA()()()()()()(),e.TgZ(44,"div",27),e._UZ(45,"div",28),e.TgZ(46,"div",29)(47,"button",30),e.NdJ("click",function(){return r.fecharDialog(!0)}),e._uU(48,"Gerar"),e.qZA()()()()()),2&t){const m=e.MAs(23);e.xp6(4),e.Q6J("tabIndex",-1),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("formControlName","nome"),e.xp6(1),e.Q6J("form-control",r.form.get("nome")),e.xp6(4),e.Q6J("rangePicker",m),e.xp6(3),e.Q6J("for",m),e.xp6(26),e.Q6J("disabled",r.form.invalid)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.lW,v.Hw,_.KE,_.hX,d.Nt,c.nW,c.wx,c.zY,c.By,c._g,l.VQ,l.U0,u.p]}),o})();var b=a(8280);let y=(()=>{class o extends b.e{constructor(t){super("/ordemServicos",t),this.injector=t}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.zs3))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var A=a(4410),w=a(6060),L=a(6659),R=a(6714),J=a(2802);function Y(o,n){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Cod. Superg\xe1s "),e.qZA())}function P(o,n){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.codigoSupergas," ")}}function q(o,n){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Status "),e.qZA())}function M(o,n){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.status?"Aberto":"Fechado"," ")}}function Q(o,n){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Cliente "),e.qZA())}function B(o,n){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.cliente.nome," ")}}function k(o,n){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Tipo de Servi\xe7o "),e.qZA())}function j(o,n){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.tipoServico," ")}}function z(o,n){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Data "),e.qZA())}function $(o,n){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.data,"d/M/y")," ")}}function G(o,n){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," A\xe7\xf5es "),e.qZA())}function H(o,n){1&o&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}const K=function(o){return[o,"editar"]};function W(o,n){if(1&o&&(e.TgZ(0,"span",25),e._UZ(1,"mat-icon",26),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,K,t.id))}}function X(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span",27),e.NdJ("click",function(){e.CHM(t);const m=e.oxw().$implicit,f=e.oxw(2);return e.KtG(f.visualizar(m))}),e._UZ(1,"mat-icon",28),e.qZA()}}function V(o,n){if(1&o&&(e.TgZ(0,"mat-cell"),e.YNc(1,H,2,0,"span",22),e.YNc(2,W,2,3,"span",23),e.YNc(3,X,2,0,"span",24),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.validaPermissao("MANTER_PERFIL")),e.xp6(1),e.Q6J("ngIf",t.validaPermissao("MANTER_PERFIL")),e.xp6(1),e.Q6J("ngIf",t.validaPermissao("MANTER_PERFIL"))}}function ee(o,n){1&o&&e._UZ(0,"mat-header-row")}function te(o,n){1&o&&e._UZ(0,"mat-row")}const F=function(){return["codigoSupergas","cliente","tipoServico","data","status","acoes"]};function oe(o,n){if(1&o&&(e.TgZ(0,"div",1)(1,"mat-table",11),e.ynx(2,12),e.YNc(3,Y,2,0,"mat-header-cell",13),e.YNc(4,P,2,1,"mat-cell",14),e.BQk(),e.ynx(5,15),e.YNc(6,q,2,0,"mat-header-cell",13),e.YNc(7,M,2,1,"mat-cell",14),e.BQk(),e.ynx(8,16),e.YNc(9,Q,2,0,"mat-header-cell",13),e.YNc(10,B,2,1,"mat-cell",14),e.BQk(),e.ynx(11,17),e.YNc(12,k,2,0,"mat-header-cell",13),e.YNc(13,j,2,1,"mat-cell",14),e.BQk(),e.ynx(14,18),e.YNc(15,z,2,0,"mat-header-cell",13),e.YNc(16,$,3,4,"mat-cell",14),e.BQk(),e.ynx(17,19),e.YNc(18,G,2,0,"mat-header-cell",13),e.YNc(19,V,4,3,"mat-cell",14),e.BQk(),e.YNc(20,ee,1,0,"mat-header-row",20),e.YNc(21,te,1,0,"mat-row",21),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.resources),e.xp6(19),e.Q6J("matHeaderRowDef",e.DdM(3,F)),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(4,F))}}function re(o,n){1&o&&e._UZ(0,"app-not-found-data",29)}function ie(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"mat-paginator",31),e.NdJ("page",function(m){e.CHM(t);const f=e.oxw();return e.KtG(f.paginacao(m))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}}let ae=(()=>{class o extends Z.d{constructor(t,r,m){super(r,m),this.dialog=t,this.injector=r,this.ordemServicoService=m}gerarRelatorio(){this.dialog.open(p,{data:{}})}visualizar(t){alert(`N\xe3o implementado \n\n ${JSON.stringify(t)}`),console.log("OS id => ",t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S.uw),e.Y36(e.zs3),e.Y36(y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ordemservico-list"]],features:[e.qOj],decls:12,vars:5,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden","bg-card","dark:bg-transparent"],["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","overflow-y-auto"],["page-title","Ordem De Servi\xe7os","placeholder-text","Buscar por nome do cliente",3,"show-button","pesquisar"],[1,"w-full","flex","items-center","justify-end"],["mat-flat-button","",1,"mat-focus-indicator","mt-2","fuse-mat-button-rounded","mat-flat-button","mat-button-base","mat-primary","m-1","text-1xl",3,"click"],[1,"p-3","flex","flex-row","items-center"],[1,"icon-size-5","mr-1",3,"svgIcon"],[1,"my-2","border-b"],["class","flex flex-col flex-auto min-w-0 overflow-y-auto","cdkScrollable","",4,"ngIf"],["class","h-full","mensagem","Nenhum registro de perfils encontrado!",4,"ngIf"],["class","flex flex-0 flex-col",4,"ngIf"],[3,"dataSource"],["matColumnDef","codigoSupergas",1,"cursor-pointer"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","status",1,"cursor-pointer"],["matColumnDef","cliente",1,"cursor-pointer"],["matColumnDef","tipoServico",1,"cursor-pointer"],["matColumnDef","data"],["matColumnDef","acoes"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","mr-2 cursor-pointer",3,"routerLink",4,"ngIf"],["class","cursor-pointer",3,"click",4,"ngIf"],[1,"mr-2","cursor-pointer",3,"routerLink"],["svgIcon","heroicons_outline:pencil-alt",1,"text-accent","dark:text-accent-300"],[1,"cursor-pointer",3,"click"],["lass","text-accent dark:text-accent-300","svgIcon","heroicons_outline:eye"],["mensagem","Nenhum registro de perfils encontrado!",1,"h-full"],[1,"flex","flex-0","flex-col"],["aria-label","Select page",1,"flex","justify-end","border-t",3,"length","pageSize","pageSizeOptions","page"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-page-header",2),e.NdJ("pesquisar",function(f){return r.filtrarResource(f)}),e.qZA(),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return r.gerarRelatorio()}),e.TgZ(5,"span",5),e._UZ(6,"mat-icon",6),e._uU(7," Gerar Relat\xf3rio "),e.qZA()()(),e._UZ(8,"div",7),e.YNc(9,oe,22,5,"div",8),e.YNc(10,re,1,0,"app-not-found-data",9),e.qZA(),e.YNc(11,ie,2,3,"div",10),e.qZA()),2&t&&(e.xp6(2),e.Q6J("show-button",!0),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:trending-up"),e.xp6(3),e.Q6J("ngIf",r.length>0),e.xp6(1),e.Q6J("ngIf",r.length<=0),e.xp6(1),e.Q6J("ngIf",r.length>0))},dependencies:[i.O5,h.rH,T.lW,A.BZ,A.fO,A.as,A.w1,A.Dz,A.nj,A.ge,A.ev,A.XQ,A.Gk,v.Hw,w.NW,L.PQ,R.J,J.q,i.uU]}),o})();var ne=a(6779),se=a(8653),ce=a(2688);class le extends ce.s{constructor(n,t,r,m,f,U,Se){super(),this.id=n,this.codigoSupergas=t,this.data=r,this.status=m,this.tipoServico=f,this.cliente=U,this.grupoServico=Se}}var ue=a(2904),O=a(2340),me=a(8987);let de=(()=>{class o{constructor(t){this._http=t,this.apiPath="/ordemServicogrupoServico"}getAll(){return this._http.get(`${O.N.api}${this.apiPath}`)}getById(t,r){return this._http.get(`${O.N.api}${this.apiPath}/${t}/${r}`)}insert(t){return this._http.post(`${O.N.api}${this.apiPath}`,t)}update(t){return this._http.put(`${O.N.api}${this.apiPath}/${t.id.ordemServico.id}/${t.id.grupoServico.id}`,t)}delete(t,r){return this._http.delete(`${O.N.api}${this.apiPath}/${t}/${r}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(me.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var I=a(207),E=a(8550),pe=a(2494);function fe(o,n){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.nome," ")}}function ge(o,n){if(1&o&&(e.TgZ(0,"div",30)(1,"div",31)(2,"div",32),e._uU(3),e.qZA()(),e.TgZ(4,"div",33)(5,"div",34),e._UZ(6,"mat-icon",35),e.TgZ(7,"span")(8,"strong"),e._uU(9,"Cod. Superg\xe1s:"),e.qZA(),e._uU(10),e.qZA()(),e.TgZ(11,"span",36)(12,"strong"),e._uU(13,"CNPJ: "),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"span",36)(16,"strong"),e._uU(17,"E-mail: "),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"span",36)(20,"strong"),e._uU(21,"Telefone: "),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"span",36)(24,"strong"),e._uU(25,"Observa\xe7\xf5es: "),e.qZA(),e._uU(26),e.qZA()()()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",t.resourceForm.get("cliente").value.nome," "),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:user"),e.xp6(4),e.hij(" ",t.resourceForm.get("cliente").value.codigoSupergas," "),e.xp6(4),e.hij(" ",t.resourceForm.get("cliente").value.cnpj," "),e.xp6(4),e.hij(" ",t.resourceForm.get("cliente").value.email," "),e.xp6(4),e.hij(" ",t.resourceForm.get("cliente").value.telefone," "),e.xp6(4),e.hij(" ",t.resourceForm.get("cliente").value.observacoes," ")}}function ve(o,n){1&o&&(e.TgZ(0,"fuse-alert",37),e._uU(1," Nenhum "),e.TgZ(2,"strong"),e._uU(3,"servi\xe7o"),e.qZA(),e._uU(4," cadastrado ainda! "),e.qZA()),2&o&&e.Q6J("type","warning")("appearance","outline")}function he(o,n){if(1&o&&(e.TgZ(0,"tr",45)(1,"th",46),e._uU(2),e.qZA(),e.TgZ(3,"td",47),e._uU(4),e.qZA(),e.TgZ(5,"td",47),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td",47),e._uU(9),e.qZA(),e.TgZ(10,"td",47),e._uU(11),e.qZA(),e.TgZ(12,"td",47),e._uU(13),e.qZA(),e.TgZ(14,"td",47),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.TgZ(17,"td",47)(18,"span",48),e._UZ(19,"mat-icon",49),e.qZA()()()),2&o){const t=n.$implicit;let r;e.xp6(2),e.hij(" ",t.codigoSapItem," "),e.xp6(2),e.hij(" ",t.descSapItem," "),e.xp6(2),e.hij(" ",e.xi3(7,7,t.valorUnitario,"R$ ")," "),e.xp6(3),e.hij(" ",t.unidadeGrupoServico.nome," "),e.xp6(2),e.hij(" ",t.tipoServico," "),e.xp6(2),e.hij(" ",null!==(r=t.quantidade)&&void 0!==r?r:0," "),e.xp6(2),e.hij(" ",e.xi3(16,10,t.subTotal,"R$ ")," ")}}function _e(o,n){if(1&o&&(e.TgZ(0,"div",38)(1,"table",39)(2,"thead",40)(3,"tr")(4,"th",41),e._uU(5," C\xf3digo Sap "),e.qZA(),e.TgZ(6,"th",41),e._uU(7," Descri\xe7\xe3o Sap "),e.qZA(),e.TgZ(8,"th",41),e._uU(9," Valor Unit\xe1rio "),e.qZA(),e.TgZ(10,"th",41),e._uU(11," Unidade Grupo Servi\xe7o "),e.qZA(),e.TgZ(12,"th",41),e._uU(13," Tipo Grupo Servi\xe7o "),e.qZA(),e.TgZ(14,"th",41),e._uU(15," Quantidade "),e.qZA(),e.TgZ(16,"th",41),e._uU(17," SubTotal "),e.qZA(),e.TgZ(18,"th",41),e._uU(19," A\xe7\xe3o "),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,he,20,13,"tr",42),e.TgZ(22,"tr",43),e._UZ(23,"td",44),e.TgZ(24,"td"),e._uU(25,"Total"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.ALo(28,"currency"),e.qZA(),e._UZ(29,"td"),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(21),e.Q6J("ngForOf",t.resource.grupoServico),e.xp6(6),e.Oqu(e.xi3(28,2,t.total,"R$ "))}}function xe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.submitForm())}),e._uU(1," Salvar "),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.resourceForm.invalid)}}function Ze(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.submitForm())}),e._uU(1," Finalizar OS "),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.resourceForm.invalid)}}let N=(()=>{class o extends ne.e{constructor(t,r,m,f){super(r,new le,t),this.orderServicoService=t,this.injector=r,this._clienteService=m,this._ordemServicoGrupoServicoService=f,this.clientes=[],this.filtro={filtro:"",pagina:0,direcaoOrdenacao:"DESC",tamanho:10,ordenarPor:"id"},this.datadosCarregados=!1}ngOnInit(){super.ngOnInit(),this.carregaClientes(),this._carregaOrdemServicoGrupoServico()}submitForm(){alert(`N\xe3o implementado \n\n ${JSON.stringify(this.resourceForm.value)}`),console.log(this.resourceForm.value)}adicionarServico(){alert("N\xe3o implementado!")}carregaClientes(t=""){this.filtro.filtro=t,console.log(this.filtro),this._clienteService.getAll(this.filtro).subscribe(r=>{console.log(r),this.clientes=r.content},r=>console.log(r))}displayFn(t){return t&&t.nome?t.nome:""}get total(){if(!this.resource.id)return 0;let t=0;return this.resource.grupoServico.forEach(r=>t+=r.subTotal),t}buildResourceForm(){this.resourceForm=this.formBuilder.group({cliente:[null,[s.kI.required]],data:[null,[s.kI.required]]}),"novo"===this.currentAction&&this.resourceForm.get("data").setValue(new Date)}createPageTitle(){return"Cadastro de Nova Ordem de Servico"}editionPageTitle(){return"Editando Order de Servico: "+(this.resource.codigoSupergas||"")}_carregaOrdemServicoGrupoServico(){(0,se.F)(500).subscribe(r=>{this.datadosCarregados||!this.datadosCarregados&&this.resource.id&&(this.datadosCarregados=!0,console.log(this.resource),this.carregaQuantidadeESubTotal())})}carregaQuantidadeESubTotal(){this.resource.grupoServico.map(t=>{this._ordemServicoGrupoServicoService.getById(this.resource.id,t.id).subscribe(r=>{t.quantidade=r.quantidade,t.subTotal=r.quantidade*t.valorUnitario})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y),e.Y36(e.zs3),e.Y36(ue.$),e.Y36(de))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ordemservico-form"]],features:[e.qOj],decls:40,vars:14,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],[1,"bg-card","rounded-2xl","shadow","overflow-hidden"],[1,"m-4",3,"formGroup"],[1,"w-full"],[1,"text-xl"],[1,"grid","sm:grid-cols-4","gap-6","w-full","mt-8"],[1,"sm:col-span-4"],[1,"fuse-mat-no-subscript","w-full","p-1"],["id","cliente","type","text","matInput","",3,"formControlName","matAutocomplete","keyup"],["cliente",""],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","flex flex-col my-2 flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden dark:bg-accent-700 bg-accent-100",4,"ngIf"],["matInput","","formControlName","data",3,"matDatepicker"],["matPrefix","",3,"for"],["data_os",""],["matSuffix","",1,"p-1"],[3,"form-control"],[1,"flex","items-center","justify-center","my-3","pr-2","border-2","border-dashed","border-gray-300","rounded-2xl","cursor-pointer",3,"click"],[1,"text-2xl","py-2"],["class","mt-2",3,"type","appearance",4,"ngIf"],["class","overflow-x-auto relative shadow-md sm:rounded-lg mt-4",4,"ngIf"],[1,"mt-11","mb-10","border-t"],[1,"flex","items-center","justify-end"],["routerLink","/ordem-servico","routerLinkActive","router-link-active"],["mat-stroked-button","","type","button",1,"fuse-mat-button-rounded","mat-flat-button","mat-button-base"],["class","ml-4 fuse-mat-button-rounded mat-flat-button mat-button-base mat-primary","mat-flat-button","","type","button",3,"disabled","click",4,"ngIf"],[3,"value"],[1,"flex","flex-col","my-2","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden","dark:bg-accent-700","bg-accent-100"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"flex","flex-col","mt-2"],[1,"flex","item-center"],[1,"icon-size-5","text-hint","mr-1",3,"svgIcon"],[1,"ml-6"],[1,"mt-2",3,"type","appearance"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg","mt-4"],[1,"w-full","text-md","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b dark:bg-gray-900 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-900","dark:border-gray-700","my-3"],["colspan","5"],[1,"bg-white","border-b","dark:bg-gray-900","dark:border-gray-700"],["scope","row",1,"py-4","px-6","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"py-4","px-6"],[1,"cursor-pointer"],["svgIcon","heroicons_outline:trash",1,"text-warn-600"],["mat-flat-button","","type","button",1,"ml-4","fuse-mat-button-rounded","mat-flat-button","mat-button-base","mat-primary",3,"disabled","click"]],template:function(t,r){if(1&t){const m=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4)(5,"div",5),e._uU(6),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),e._uU(11,"Cliente"),e.qZA(),e.TgZ(12,"input",9,10),e.NdJ("keyup",function(){e.CHM(m);const U=e.MAs(13);return e.KtG(r.carregaClientes(U.value))}),e.qZA(),e.TgZ(14,"mat-autocomplete",11,12),e.YNc(16,fe,2,2,"mat-option",13),e.qZA()(),e.YNc(17,ge,27,7,"div",14),e.TgZ(18,"mat-form-field",8)(19,"mat-label"),e._uU(20,"Data"),e.qZA(),e._UZ(21,"input",15)(22,"mat-datepicker-toggle",16)(23,"mat-datepicker",null,17),e.TgZ(25,"span",18),e._UZ(26,"app-form-field-error",19),e.qZA()(),e.TgZ(27,"div",4)(28,"div",20),e.NdJ("click",function(){return r.adicionarServico()}),e.TgZ(29,"h1",21),e._uU(30,"+ Adicionar Servi\xe7o"),e.qZA()(),e.YNc(31,ve,5,2,"fuse-alert",22),e.qZA()()(),e.YNc(32,_e,30,5,"div",23),e._UZ(33,"div",24),e.TgZ(34,"div",25)(35,"a",26)(36,"button",27),e._uU(37," Cancelar "),e.qZA()(),e.YNc(38,xe,2,1,"button",28),e.YNc(39,Ze,2,1,"button",28),e.qZA()()()()()}if(2&t){const m=e.MAs(15),f=e.MAs(24);e.xp6(3),e.Q6J("formGroup",r.resourceForm),e.xp6(3),e.Oqu(r.pageTitle),e.xp6(6),e.Q6J("formControlName","cliente")("matAutocomplete",m),e.xp6(2),e.Q6J("displayWith",r.displayFn),e.xp6(2),e.Q6J("ngForOf",r.clientes),e.xp6(1),e.Q6J("ngIf",r.resourceForm.get("cliente").valid),e.xp6(4),e.Q6J("matDatepicker",f),e.xp6(1),e.Q6J("for",f),e.xp6(4),e.Q6J("form-control",r.resourceForm.get("data")),e.xp6(5),e.Q6J("ngIf",(null==r.resource||null==r.resource.grupoServico?null:r.resource.grupoServico.length)<=0),e.xp6(1),e.Q6J("ngIf","editar"===r.currentAction||(null==r.resource||null==r.resource.grupoServico?null:r.resource.grupoServico.length)>0),e.xp6(6),e.Q6J("ngIf","novo"===r.currentAction),e.xp6(1),e.Q6J("ngIf","editar"===r.currentAction)}},dependencies:[i.sg,i.O5,h.yS,h.Od,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.lW,v.Hw,_.KE,_.hX,_.qo,_.R9,d.Nt,I.ey,c.Mq,c.hl,c.nW,E.XC,E.ZL,pe.W,u.p,i.H9]}),o})();const Te=[{path:"",component:ae},{path:"novo",component:N},{path:":id/editar",component:N}],D={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let Ae=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:I.sG,useValue:D}],imports:[i.ez,h.Bz.forChild(Te),g.m]}),o})()},6714:(C,x,a)=>{a.d(x,{J:()=>h});var i=a(2560);let h=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=i.Xpm({type:g,selectors:[["app-not-found-data"]],inputs:{mensagem:"mensagem"},decls:4,vars:1,consts:[[1,"flex","flex-col","w-full","h-full","items-center","justify-center","border-t-2","border-gray-200"],["src","assets/icons/searching.svg","alt","",1,"w-64","h-64"],[1,"mt-2","text-lg","md:text-2xl","font-medium","tracking-tight","text-center","text-secondary"]],template:function(s,e){1&s&&(i.TgZ(0,"div",0),i._UZ(1,"img",1),i.TgZ(2,"p",2),i._uU(3),i.qZA()()),2&s&&(i.xp6(3),i.Oqu(e.mensagem))}}),g})()},2802:(C,x,a)=>{a.d(x,{q:()=>d});var i=a(2560),h=a(4666),g=a(9706),Z=a(7822),s=a(5074),e=a(1267),S=a(4522);function T(c,l){if(1&c){const u=i.EpF();i.TgZ(0,"mat-form-field",5),i._UZ(1,"mat-icon",6),i.TgZ(2,"input",7,8),i.NdJ("keyup",function(){i.CHM(u);const b=i.MAs(3),y=i.oxw();return i.KtG(y.filtrar(b.value))}),i.qZA()()}if(2&c){const u=i.oxw();i.xp6(1),i.Q6J("svgIcon","heroicons_solid:search"),i.xp6(1),i.Q6J("autocomplete","off")("placeholder",u.placeholder)}}const v=function(){return["novo"]};function _(c,l){1&c&&(i.TgZ(0,"a",9)(1,"span",10),i._UZ(2,"mat-icon",11),i._uU(3," Cadastrar "),i.qZA()()),2&c&&(i.Q6J("routerLink",i.DdM(2,v)),i.xp6(2),i.Q6J("svgIcon","heroicons_outline:plus"))}let d=(()=>{class c{constructor(){this.pageTitle="",this.showButton=!0,this.showSearch=!0,this.placeholder="",this.pesquisar=new i.vpe}ngOnInit(){}filtrar(u){this.pesquisar.emit(u)}}return c.\u0275fac=function(u){return new(u||c)},c.\u0275cmp=i.Xpm({type:c,selectors:[["app-page-header"]],inputs:{pageTitle:["page-title","pageTitle"],showButton:["show-button","showButton"],showSearch:["show-search","showSearch"],placeholder:["placeholder-text","placeholder"]},outputs:{pesquisar:"pesquisar"},decls:6,vars:3,consts:[[1,"relative","flex","flex-col","flx-col-0","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","flex-col","sm:flex-row","items-start","shrink-0","sm:items-center","mt-6","sm:mt-0","sm:ml-4"],["class","fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded min-w-64",4,"ngIf"],["routerLinkActive","router-link-active","class","mat-focus-indicator mt-2 fuse-mat-button-rounded mat-flat-button mat-button-base mat-accent m-1 text-1xl","mat-flat-button","",3,"routerLink",4,"ngIf"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","id","searchPerfil",3,"autocomplete","placeholder","keyup"],["temoPesquisa",""],["routerLinkActive","router-link-active","mat-flat-button","",1,"mat-focus-indicator","mt-2","fuse-mat-button-rounded","mat-flat-button","mat-button-base","mat-accent","m-1","text-1xl",3,"routerLink"],[1,"p-3","flex","flex-row","items-center"],[1,"icon-size-5",3,"svgIcon"]],template:function(u,p){1&u&&(i.TgZ(0,"div",0)(1,"div",1),i._uU(2),i.qZA(),i.TgZ(3,"div",2),i.YNc(4,T,4,3,"mat-form-field",3),i.YNc(5,_,4,3,"a",4),i.qZA()()),2&u&&(i.xp6(2),i.Oqu(p.pageTitle),i.xp6(2),i.Q6J("ngIf",p.showSearch),i.xp6(1),i.Q6J("ngIf",p.showButton))},dependencies:[h.O5,g.yS,g.Od,Z.Hw,s.KE,s.qo,e.Nt,S.zs]}),c})()},6779:(C,x,a)=>{a.d(x,{e:()=>T});var i=a(2560),h=a(2508),g=a(9706),Z=a(6545),s=a.n(Z),e=(()=>((e||(e={})).CARREGAMENTO_DADOS_API="carregamento-dados-api",e))(),S=a(8280);let T=(()=>{class v{constructor(d,c,l){this.injecto=d,this.resource=c,this.resourceService=l,this.carregamentoDeDados=new i.vpe,this.route=this.injecto.get(g.gz),this.router=this.injecto.get(g.F0),this.formBuilder=this.injecto.get(h.qu)}ngOnInit(){this.setCurrentAction(),this.buildResourceForm(),this.loadResource()}ngAfterContentChecked(){this.setPageTitle()}submitForm(){if(this.resourceForm.invalid)return;const d=this.resourceForm.value;"novo"!==this.currentAction?(d.id=this.resource.id,this.resourceService.update(d).subscribe(()=>{s().success("Dado atualizado com sucesso!","Sucesso",{timeOut:1e4,progressBar:!0,closeButton:!0}),this.router.navigate([this.route.snapshot.parent.url[0].path])},c=>{s().error("N\xe3o foi poss\xedvel atualizar o dado",c.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})})):this.resourceService.insert(d).subscribe(()=>{s().success("Dado cadastrado com sucesso!","Sucesso",{timeOut:1e4,progressBar:!0,closeButton:!0}),this.router.navigate([this.route.snapshot.parent.url[0].path])},c=>{s().error("N\xe3o foi poss\xedvel carregar os dados",c.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})})}setCurrentAction(){this.currentAction="novo"===this.route.snapshot.url[this.route.snapshot.url.length-1]?.path?"novo":"editar"}loadResource(){if("editar"===this.currentAction){const d=Number(this.route.snapshot.url[this.route.snapshot.url.length-2]?.path);this.resourceService.getById(d).subscribe(c=>{this.resource=c,this.resourceForm.patchValue(this.resource),this.carregamentoDeDados.emit(e.CARREGAMENTO_DADOS_API)},c=>{s().error("N\xe3o foi poss\xedvel carregar os dados",c.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})})}}setPageTitle(){this.pageTitle="novo"===this.currentAction?this.createPageTitle():this.editionPageTitle()}createPageTitle(){return"Novo"}editionPageTitle(){return"Edi\xe7\xe3o"}}return v.\u0275fac=function(d){return new(d||v)(i.Y36(i.zs3),i.Y36("resource"),i.Y36(S.e))},v.\u0275cmp=i.Xpm({type:v,selectors:[["ng-component"]],decls:0,vars:0,template:function(d,c){},encapsulation:2}),v})()},971:(C,x,a)=>{a.d(x,{d:()=>_});var i=a(6060),h=a(1683),g=a(705),Z=a(7134),s=a(2560);let e=(()=>{class d{constructor(){}temPermissao(l){const u=localStorage.getItem(Z.O.TOKEN);if(!u)return!1;const{ROLES:p}=g.l.decodeToken(u);return!!Object(p).find(b=>b==l)}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275prov=s.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var S=a(6545),T=a.n(S),v=a(8280);let _=(()=>{class d{constructor(l,u){this.injecto=l,this.resourceService=u,this.resources=[],this.length=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,100],this._fuseConfirmationService=this.injecto.get(h.R),this._matPaginatorIntl=this.injecto.get(i.ye),this._ruleService=this.injecto.get(e)}ngOnInit(){this.carregaInformacoesResource(),this._matPaginatorIntl.itemsPerPageLabel="Itens por p\xe1gina"}setPageSizeOptions(l){l&&(this.pageSizeOptions=l.split(",").map(u=>+u))}carregaInformacoesResource(){this.resourceService.getAll({filtro:"",pagina:0,direcaoOrdenacao:"DESC",tamanho:10,ordenarPor:"id"}).subscribe(u=>{this.resources=u.content,this.length=u.totalElements,this.pageSize=u.size})}excluir(l){this._fuseConfirmationService.open({title:`Deseja realmente excluir o item: ${l.id}?`,message:"",icon:{show:!0,name:"heroicons_outline:exclamation",color:"warn"},actions:{confirm:{show:!0,label:"Confirmar",color:"warn"},cancel:{show:!0,label:"Cancelar"}},dismissible:!1}).afterClosed().subscribe(p=>{"confirmed"===p&&this.resourceService.delete(l.id).subscribe(b=>{T().success("Item exclu\xeddo com sucesso!","",{timeOut:1e4,progressBar:!0,closeButton:!0}),this.carregaInformacoesResource()},b=>{T().error("N\xe3o foi poss\xedvel excluir o perfil",b.error.error,{timeOut:1e4,progressBar:!0,closeButton:!0})})})}paginacao(l){this.pageSize=l.pageSize,this.resourceService.getAll({filtro:"",pagina:l.pageIndex,direcaoOrdenacao:"DESC",tamanho:this.pageSize,ordenarPor:"id"}).subscribe(p=>{this.resources=p.content,this.length=p.totalElements,this.pageSize=p.size})}filtrarResource(l){this.resourceService.getAll({filtro:l,pagina:0,direcaoOrdenacao:"DESC",tamanho:10,ordenarPor:"id"}).subscribe(p=>{this.resources=p.content,this.length=p.totalElements,this.pageSize=p.size})}validaPermissao(l){return this._ruleService.temPermissao(l)}}return d.\u0275fac=function(l){return new(l||d)(s.Y36(s.zs3),s.Y36(v.e))},d.\u0275cmp=s.Xpm({type:d,selectors:[["ng-component"]],decls:0,vars:0,template:function(l,u){},encapsulation:2}),d})()},2688:(C,x,a)=>{a.d(x,{s:()=>i});class i{}}}]);
//# sourceMappingURL=61.74e8ddb0be485348.js.map